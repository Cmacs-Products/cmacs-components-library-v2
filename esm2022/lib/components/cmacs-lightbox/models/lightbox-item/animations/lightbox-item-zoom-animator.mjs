import { Animator } from '../../Animator';
const ZOOM_PERCENT = 10;
export class LightboxItemZoomAnimator extends Animator {
    constructor() {
        super();
    }
    origin(itemOriginalDimensions, itemOriginalPosition, containerDimensions, startCb, doneCb) {
        const offsetLeft = Math.round(itemOriginalPosition.offsetLeft + (itemOriginalDimensions.width - containerDimensions.width) / 2);
        const offsetTop = Math.round(itemOriginalPosition.offsetTop + (itemOriginalDimensions.height - containerDimensions.height) / 2);
        const params = {
            width: Math.round(itemOriginalDimensions.width * 100 / containerDimensions.width),
            offsetTop,
            offsetLeft,
            duration: 0
        };
        this.animate(params, () => {
            if (startCb) {
                startCb();
            }
        }, () => {
            if (doneCb) {
                doneCb();
            }
        });
    }
    zoom(width, itemOriginalDimensions, itemDimensions, containerDimensions, duration, startCb, doneCb) {
        const params = {
            width,
            offsetLeft: this.animation.params ? this._getZoomOffsetLeft(itemDimensions, containerDimensions, this.animation.params.offsetLeft, itemOriginalDimensions.width * width / 100) : 0,
            offsetTop: this.animation.params ? this._getZoomOffsetTop(itemDimensions, containerDimensions, this.animation.params.offsetTop, itemOriginalDimensions.height * width / 100) : 0,
            duration
        };
        this.animate(params, () => {
            if (startCb) {
                startCb();
            }
        }, () => {
            if (doneCb) {
                doneCb();
            }
        });
    }
    _getZoomOffsetLeft(itemDimensions, containerDimensions, offset, width) {
        if (containerDimensions.width >= width) {
            return 0;
        }
        if (offset > (width - itemDimensions.width) / 2) {
            offset = (width - itemDimensions.width) / 2;
        }
        if (offset < -1 * (width - itemDimensions.width) / 2) {
            offset = -1 * (width - itemDimensions.width) / 2;
        }
        return offset;
    }
    _getZoomOffsetTop(itemDimensions, containerDimensions, offset, height) {
        if (containerDimensions.height >= height) {
            return 0;
        }
        if (offset > (height - itemDimensions.height) / 2) {
            offset = (height - itemDimensions.height) / 2;
        }
        if (offset < -1 * (height - itemDimensions.height) / 2) {
            offset = -1 * (height - itemDimensions.height) / 2;
        }
        return offset;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlnaHRib3gtaXRlbS16b29tLWFuaW1hdG9yLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvY21hY3MtY29tcG9uZW50cy12Mi1saWIvc3JjL2xpYi9jb21wb25lbnRzL2NtYWNzLWxpZ2h0Ym94L21vZGVscy9saWdodGJveC1pdGVtL2FuaW1hdGlvbnMvbGlnaHRib3gtaXRlbS16b29tLWFuaW1hdG9yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUkxQyxNQUFNLFlBQVksR0FBRyxFQUFFLENBQUM7QUFFeEIsTUFBTSxPQUFPLHdCQUF5QixTQUFRLFFBQW1DO0lBRTdFO1FBQ0ksS0FBSyxFQUFFLENBQUM7SUFDWixDQUFDO0lBRU0sTUFBTSxDQUFDLHNCQUFrQyxFQUFFLG9CQUE4QixFQUFFLG1CQUErQixFQUFFLE9BQW9CLEVBQUUsTUFBbUI7UUFFeEosTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxvQkFBb0IsQ0FBQyxVQUFVLEdBQUcsQ0FBQyxzQkFBc0IsQ0FBQyxLQUFLLEdBQUcsbUJBQW1CLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDaEksTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxvQkFBb0IsQ0FBQyxTQUFTLEdBQUcsQ0FBQyxzQkFBc0IsQ0FBQyxNQUFNLEdBQUcsbUJBQW1CLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFFaEksTUFBTSxNQUFNLEdBQUc7WUFDWCxLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxzQkFBc0IsQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLG1CQUFtQixDQUFDLEtBQUssQ0FBQztZQUNqRixTQUFTO1lBQ1QsVUFBVTtZQUNWLFFBQVEsRUFBRSxDQUFDO1NBQ2QsQ0FBQztRQUVGLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRTtZQUV0QixJQUFJLE9BQU8sRUFBRTtnQkFFVCxPQUFPLEVBQUUsQ0FBQzthQUNiO1FBQ0wsQ0FBQyxFQUFFLEdBQUcsRUFBRTtZQUVKLElBQUksTUFBTSxFQUFFO2dCQUVSLE1BQU0sRUFBRSxDQUFDO2FBQ1o7UUFDTCxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUM7SUFFTSxJQUFJLENBQUMsS0FBYSxFQUFFLHNCQUFrQyxFQUFFLGNBQTBCLEVBQUUsbUJBQStCLEVBQUUsUUFBZ0IsRUFBRSxPQUFvQixFQUFFLE1BQW1CO1FBRW5MLE1BQU0sTUFBTSxHQUFHO1lBQ1gsS0FBSztZQUNMLFVBQVUsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLGNBQWMsRUFBRSxtQkFBbUIsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsc0JBQXNCLENBQUMsS0FBSyxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNsTCxTQUFTLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxjQUFjLEVBQUUsbUJBQW1CLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFLHNCQUFzQixDQUFDLE1BQU0sR0FBRyxLQUFLLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDaEwsUUFBUTtTQUNYLENBQUM7UUFFRixJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUU7WUFFdEIsSUFBSSxPQUFPLEVBQUU7Z0JBRVQsT0FBTyxFQUFFLENBQUM7YUFDYjtRQUNMLENBQUMsRUFBRSxHQUFHLEVBQUU7WUFFSixJQUFJLE1BQU0sRUFBRTtnQkFFUixNQUFNLEVBQUUsQ0FBQzthQUNaO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRU8sa0JBQWtCLENBQUMsY0FBMEIsRUFBRSxtQkFBK0IsRUFBRSxNQUFjLEVBQUUsS0FBYTtRQUVqSCxJQUFJLG1CQUFtQixDQUFDLEtBQUssSUFBSSxLQUFLLEVBQUU7WUFDcEMsT0FBTyxDQUFDLENBQUM7U0FDWjtRQUNELElBQUksTUFBTSxHQUFHLENBQUMsS0FBSyxHQUFHLGNBQWMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUU7WUFDN0MsTUFBTSxHQUFHLENBQUMsS0FBSyxHQUFHLGNBQWMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDL0M7UUFDRCxJQUFJLE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssR0FBRyxjQUFjLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUFFO1lBQ2xELE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssR0FBRyxjQUFjLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQ3BEO1FBQ0QsT0FBTyxNQUFNLENBQUM7SUFDbEIsQ0FBQztJQUVPLGlCQUFpQixDQUFDLGNBQTBCLEVBQUUsbUJBQStCLEVBQUUsTUFBYyxFQUFFLE1BQWM7UUFFakgsSUFBSSxtQkFBbUIsQ0FBQyxNQUFNLElBQUksTUFBTSxFQUFFO1lBQ3RDLE9BQU8sQ0FBQyxDQUFDO1NBQ1o7UUFDRCxJQUFJLE1BQU0sR0FBRyxDQUFDLE1BQU0sR0FBRyxjQUFjLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFO1lBQy9DLE1BQU0sR0FBRyxDQUFDLE1BQU0sR0FBRyxjQUFjLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQ2pEO1FBQ0QsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEdBQUcsY0FBYyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsRUFBRTtZQUNwRCxNQUFNLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEdBQUcsY0FBYyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztTQUN0RDtRQUNELE9BQU8sTUFBTSxDQUFDO0lBQ2xCLENBQUM7Q0FDSiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFuaW1hdGlvbkV2ZW50IH0gZnJvbSAnQGFuZ3VsYXIvYW5pbWF0aW9ucyc7XHJcbmltcG9ydCB7IExpZ2h0Ym94SXRlbVpvb21BbmltYXRpb24gfSBmcm9tICcuL2xpZ2h0Ym94LWl0ZW0tem9vbS1hbmltYXRpb24uaW50ZXJmYWNlJztcclxuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0IH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IEFuaW1hdG9yIH0gZnJvbSAnLi4vLi4vQW5pbWF0b3InO1xyXG5pbXBvcnQgeyBEaW1lbnNpb25zIH0gZnJvbSAnLi4vLi4vZGltZW5zaW9ucy5pbnRlcmZhY2UnO1xyXG5pbXBvcnQgeyBQb3NpdGlvbiB9IGZyb20gJy4uLy4uL3Bvc2l0aW9uLmludGVyZmFjZSc7XHJcblxyXG5jb25zdCBaT09NX1BFUkNFTlQgPSAxMDtcclxuXHJcbmV4cG9ydCBjbGFzcyBMaWdodGJveEl0ZW1ab29tQW5pbWF0b3IgZXh0ZW5kcyBBbmltYXRvcjxMaWdodGJveEl0ZW1ab29tQW5pbWF0aW9uPiB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb3JpZ2luKGl0ZW1PcmlnaW5hbERpbWVuc2lvbnM6IERpbWVuc2lvbnMsIGl0ZW1PcmlnaW5hbFBvc2l0aW9uOiBQb3NpdGlvbiwgY29udGFpbmVyRGltZW5zaW9uczogRGltZW5zaW9ucywgc3RhcnRDYj86ICgpID0+IHZvaWQsIGRvbmVDYj86ICgpID0+IHZvaWQpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgY29uc3Qgb2Zmc2V0TGVmdCA9IE1hdGgucm91bmQoaXRlbU9yaWdpbmFsUG9zaXRpb24ub2Zmc2V0TGVmdCArIChpdGVtT3JpZ2luYWxEaW1lbnNpb25zLndpZHRoIC0gY29udGFpbmVyRGltZW5zaW9ucy53aWR0aCkgLyAyKTtcclxuICAgICAgICBjb25zdCBvZmZzZXRUb3AgPSBNYXRoLnJvdW5kKGl0ZW1PcmlnaW5hbFBvc2l0aW9uLm9mZnNldFRvcCArIChpdGVtT3JpZ2luYWxEaW1lbnNpb25zLmhlaWdodCAtIGNvbnRhaW5lckRpbWVuc2lvbnMuaGVpZ2h0KSAvIDIpO1xyXG5cclxuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgICAgICAgIHdpZHRoOiBNYXRoLnJvdW5kKGl0ZW1PcmlnaW5hbERpbWVuc2lvbnMud2lkdGggKiAxMDAgLyBjb250YWluZXJEaW1lbnNpb25zLndpZHRoKSxcclxuICAgICAgICAgICAgb2Zmc2V0VG9wLFxyXG4gICAgICAgICAgICBvZmZzZXRMZWZ0LFxyXG4gICAgICAgICAgICBkdXJhdGlvbjogMFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuYW5pbWF0ZShwYXJhbXMsICgpID0+IHtcclxuXHJcbiAgICAgICAgICAgIGlmIChzdGFydENiKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgc3RhcnRDYigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgKCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgaWYgKGRvbmVDYikge1xyXG5cclxuICAgICAgICAgICAgICAgIGRvbmVDYigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHpvb20od2lkdGg6IG51bWJlciwgaXRlbU9yaWdpbmFsRGltZW5zaW9uczogRGltZW5zaW9ucywgaXRlbURpbWVuc2lvbnM6IERpbWVuc2lvbnMsIGNvbnRhaW5lckRpbWVuc2lvbnM6IERpbWVuc2lvbnMsIGR1cmF0aW9uOiBudW1iZXIsIHN0YXJ0Q2I/OiAoKSA9PiB2b2lkLCBkb25lQ2I/OiAoKSA9PiB2b2lkKTogdm9pZCB7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgICAgICAgd2lkdGgsXHJcbiAgICAgICAgICAgIG9mZnNldExlZnQ6IHRoaXMuYW5pbWF0aW9uLnBhcmFtcyA/IHRoaXMuX2dldFpvb21PZmZzZXRMZWZ0KGl0ZW1EaW1lbnNpb25zLCBjb250YWluZXJEaW1lbnNpb25zLCB0aGlzLmFuaW1hdGlvbi5wYXJhbXMub2Zmc2V0TGVmdCwgaXRlbU9yaWdpbmFsRGltZW5zaW9ucy53aWR0aCAqIHdpZHRoIC8gMTAwKSA6IDAsXHJcbiAgICAgICAgICAgIG9mZnNldFRvcDogdGhpcy5hbmltYXRpb24ucGFyYW1zID8gdGhpcy5fZ2V0Wm9vbU9mZnNldFRvcChpdGVtRGltZW5zaW9ucywgY29udGFpbmVyRGltZW5zaW9ucywgdGhpcy5hbmltYXRpb24ucGFyYW1zLm9mZnNldFRvcCwgaXRlbU9yaWdpbmFsRGltZW5zaW9ucy5oZWlnaHQgKiB3aWR0aCAvIDEwMCkgOiAwLFxyXG4gICAgICAgICAgICBkdXJhdGlvblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuYW5pbWF0ZShwYXJhbXMsICgpID0+IHtcclxuXHJcbiAgICAgICAgICAgIGlmIChzdGFydENiKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgc3RhcnRDYigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgKCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgaWYgKGRvbmVDYikge1xyXG5cclxuICAgICAgICAgICAgICAgIGRvbmVDYigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfZ2V0Wm9vbU9mZnNldExlZnQoaXRlbURpbWVuc2lvbnM6IERpbWVuc2lvbnMsIGNvbnRhaW5lckRpbWVuc2lvbnM6IERpbWVuc2lvbnMsIG9mZnNldDogbnVtYmVyLCB3aWR0aDogbnVtYmVyKSB7XHJcblxyXG4gICAgICAgIGlmIChjb250YWluZXJEaW1lbnNpb25zLndpZHRoID49IHdpZHRoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2Zmc2V0ID4gKHdpZHRoIC0gaXRlbURpbWVuc2lvbnMud2lkdGgpIC8gMikge1xyXG4gICAgICAgICAgICBvZmZzZXQgPSAod2lkdGggLSBpdGVtRGltZW5zaW9ucy53aWR0aCkgLyAyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2Zmc2V0IDwgLTEgKiAod2lkdGggLSBpdGVtRGltZW5zaW9ucy53aWR0aCkgLyAyKSB7XHJcbiAgICAgICAgICAgIG9mZnNldCA9IC0xICogKHdpZHRoIC0gaXRlbURpbWVuc2lvbnMud2lkdGgpIC8gMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG9mZnNldDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9nZXRab29tT2Zmc2V0VG9wKGl0ZW1EaW1lbnNpb25zOiBEaW1lbnNpb25zLCBjb250YWluZXJEaW1lbnNpb25zOiBEaW1lbnNpb25zLCBvZmZzZXQ6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcclxuXHJcbiAgICAgICAgaWYgKGNvbnRhaW5lckRpbWVuc2lvbnMuaGVpZ2h0ID49IGhlaWdodCkge1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9mZnNldCA+IChoZWlnaHQgLSBpdGVtRGltZW5zaW9ucy5oZWlnaHQpIC8gMikge1xyXG4gICAgICAgICAgICBvZmZzZXQgPSAoaGVpZ2h0IC0gaXRlbURpbWVuc2lvbnMuaGVpZ2h0KSAvIDI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvZmZzZXQgPCAtMSAqIChoZWlnaHQgLSBpdGVtRGltZW5zaW9ucy5oZWlnaHQpIC8gMikge1xyXG4gICAgICAgICAgICBvZmZzZXQgPSAtMSAqIChoZWlnaHQgLSBpdGVtRGltZW5zaW9ucy5oZWlnaHQpIC8gMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG9mZnNldDtcclxuICAgIH1cclxufVxyXG4iXX0=